CREATE TABLE dbo.Users
(ID_User INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
Login_ NVARCHAR(20)  UNIQUE NOT NULL,
Password_ NVARCHAR(20)  NOT NULL,
e_mail VARCHAR(50) UNIQUE NOT NULL,
Name NVARCHAR(20)  NOT NULL,
Surname NVARCHAR(30)  NOT NULL,
Age int not null)
GO



CREATE TABLE dbo.Books
(ID_Book INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
Book_Name NVARCHAR(50)  NOT NULL,
Annotation NVARCHAR(1500)  NOT NULL)
GO

CREATE TABLE dbo.Authors
(ID_Author INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
Author_Name NVARCHAR(50)  NOT NULL)
GO

CREATE TABLE dbo.Authors_Books
(ID_ INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
ID_Book INT REFERENCES dbo.Books(ID_Book) NOT NULL,
ID_Author INT REFERENCES dbo.Authors(ID_Author) NOT NULL)
GO

CREATE TABLE dbo.Users_Books
(ID_ INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
ID_Book INT REFERENCES dbo.Books(ID_Book) NOT NULL,
ID_User INT REFERENCES dbo.Users(ID_User) NOT NULL)
GO

CREATE TABLE dbo.Quotes
(ID_Quote INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
ID_Book INT REFERENCES dbo.Books(ID_Book) NOT NULL,
ID_User INT REFERENCES dbo.Users(ID_User) NOT NULL,
Quote NVARCHAR(400)  NOT NULL)
GO

CREATE TABLE dbo.Reviews
(ID_Review INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
ID_Book INT REFERENCES dbo.Books(ID_Book) NOT NULL,
ID_User INT REFERENCES dbo.Users(ID_User) NOT NULL,
Review NVARCHAR(1500) NOT NULL)
GO

CREATE TABLE dbo.Estimates_Books
(ID_Estimate INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
ID_Book INT REFERENCES dbo.Books(ID_Book) NOT NULL,
ID_User INT REFERENCES dbo.Users(ID_User) NOT NULL,
Estimate INT NOT NULL)
GO


CREATE ROLE Users;
GO

GRANT SELECT ON dbo.Users
    TO Users;
GO

GRANT SELECT ON dbo.Books
    TO Users;
GO

GRANT SELECT ON dbo.Authors
    TO Users;
GO

GRANT SELECT ON dbo.Authors_Books
    TO Users;
GO

GRANT SELECT,INSERT,DELETE ON dbo.Users_Books
    TO Users;
GO

GRANT SELECT,INSERT,UPDATE,DELETE ON dbo.Quotes
    TO Users;
GO

GRANT SELECT,INSERT,UPDATE,DELETE ON dbo.Reviews
    TO Users;
GO

GRANT SELECT,INSERT,UPDATE,DELETE ON dbo.Estimates_Books
    TO Users;
GO
